<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wetter Niedersachsen</title>
</head>
<body>
  <div style="font-family: Arial, sans-serif; background-color: #ffd95b; color: #234889; border-radius: 12px; padding: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); width: 100%; max-width: 600px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
      <h2 style="margin: 0; font-size: 24px;">Wetter Niedersachsen</h2>
      <div style="font-size: 14px;" id="ns-weather-last-updated">Aktualisiert: ...</div>
    </div>
    
    <div style="background-color: rgba(255, 255, 255, 0.3); border-radius: 8px; padding: 16px; margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center;">
      <div>
        <div style="font-size: 28px; font-weight: bold;" id="ns-weather-current-temp">--&deg;C</div>
        <div style="font-size: 18px;" id="ns-weather-current-condition">Laden...</div>
      </div>
      <div id="ns-weather-current-icon"></div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;" id="ns-weather-forecast-container"></div>
    
    <div style="text-align: center; font-size: 12px; margin-top: 16px; opacity: 0.7;">
      Datenquelle: Deutscher Wetterdienst (DWD)
    </div>
  </div>

  <script>
    // Weather icons as SVG
    const nsWeatherIcons = {
      'sonnig': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="20" fill="#234889"/><path d="M50 20V10M50 90V80M20 50H10M90 50H80M29 29L22 22M71 71L78 78M29 71L22 78M71 29L78 22" stroke="#234889" stroke-width="5" stroke-linecap="round"/></svg>`,
      'heiter': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="68" cy="32" r="15" fill="#234889"/><path d="M68 12V7M68 57V52M48 32H43M93 32H88M54 18L49 13M82 46L87 51M54 46L49 51M82 18L87 13" stroke="#234889" stroke-width="4" stroke-linecap="round"/><path d="M70 55C70 46.716 63.284 40 55 40H45C34.507 40 26 48.507 26 59C26 69.493 34.507 78 45 78H70C78.284 78 85 71.284 85 63C85 54.716 78.284 48 70 48V55Z" fill="white" stroke="#234889" stroke-width="3"/></svg>`,
      'wolkig': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M75 60C75 51.716 68.284 45 60 45H50C39.507 45 31 53.507 31 64C31 74.493 39.507 83 50 83H75C83.284 83 90 76.284 90 68C90 59.716 83.284 53 75 53V60Z" fill="white" stroke="#234889" stroke-width="3"/><path d="M25 45C25 36.716 31.716 30 40 30H45C55.493 30 64 38.507 64 49" stroke="#234889" stroke-width="3" fill="none" stroke-linecap="round"/></svg>`,
      'bedeckt': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M75 60C75 51.716 68.284 45 60 45H50C39.507 45 31 53.507 31 64C31 74.493 39.507 83 50 83H75C83.284 83 90 76.284 90 68C90 59.716 83.284 53 75 53V60Z" fill="white" stroke="#234889" stroke-width="3"/><path d="M45 45C45 36.716 38.284 30 30 30H25C14.507 30 6 38.507 6 49C6 59.493 14.507 68 25 68H31" stroke="#234889" stroke-width="3" fill="none" stroke-linecap="round"/></svg>`,
      'regnerisch': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M75 50C75 41.716 68.284 35 60 35H50C39.507 35 31 43.507 31 54C31 64.493 39.507 73 50 73H75C83.284 73 90 66.284 90 58C90 49.716 83.284 43 75 43V50Z" fill="white" stroke="#234889" stroke-width="3"/><line x1="40" y1="80" x2="35" y2="90" stroke="#234889" stroke-width="3" stroke-linecap="round"/><line x1="55" y1="80" x2="50" y2="90" stroke="#234889" stroke-width="3" stroke-linecap="round"/><line x1="70" y1="80" x2="65" y2="90" stroke="#234889" stroke-width="3" stroke-linecap="round"/></svg>`,
      'gewittrig': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M75 40C75 31.716 68.284 25 60 25H50C39.507 25 31 33.507 31 44C31 54.493 39.507 63 50 63H75C83.284 63 90 56.284 90 48C90 39.716 83.284 33 75 33V40Z" fill="white" stroke="#234889" stroke-width="3"/><path d="M55 63L45 78H60L50 95" stroke="#234889" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/><line x1="35" y1="70" x2="30" y2="80" stroke="#234889" stroke-width="3" stroke-linecap="round"/><line x1="75" y1="70" x2="70" y2="80" stroke="#234889" stroke-width="3" stroke-linecap="round"/></svg>`,
      'neblig': `<svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><line x1="20" y1="30" x2="80" y2="30" stroke="#234889" stroke-width="4" stroke-linecap="round"/><line x1="10" y1="45" x2="90" y2="45" stroke="#234889" stroke-width="4" stroke-linecap="round"/><line x1="15" y1="60" x2="85" y2="60" stroke="#234889" stroke-width="4" stroke-linecap="round"/><line x1="30" y1="75" x2="70" y2="75" stroke="#234889" stroke-width="4" stroke-linecap="round"/></svg>`
    };

    // Rain drop icon as SVG
    const rainDropIcon = `<svg width="12" height="12" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle;"><path d="M12 21.5C16.1421 21.5 19.5 18.1421 19.5 14C19.5 10.5 16.5 7 12 2C7.5 7 4.5 10.5 4.5 14C4.5 18.1421 7.85786 21.5 12 21.5Z" fill="#234889"/></svg>`;

    // Generate weather data
    function nsGenerateWeatherData() {
      const now = new Date();
      const month = now.getMonth();
      
      // Define seasonal parameters
      let tempMinRange, tempMaxRange, conditions;
      
      // Set seasonal data
      if (month === 11 || month === 0 || month === 1) { // Winter
        tempMinRange = [-5, 3];
        tempMaxRange = [0, 8];
        conditions = ['Bedeckt', 'Neblig', 'Schneefall', 'Leichter Regen'];
      } else if (month >= 2 && month <= 4) { // Spring
        tempMinRange = [3, 10];
        tempMaxRange = [10, 18];
        conditions = ['Heiter', 'Wolkig', 'Leichter Regen', 'Sonnig'];
      } else if (month >= 5 && month <= 7) { // Summer
        tempMinRange = [12, 18];
        tempMaxRange = [20, 30];
        conditions = ['Sonnig', 'Heiter', 'Wolkig', 'Gewitter'];
      } else { // Fall
        tempMinRange = [5, 12];
        tempMaxRange = [10, 20];
        conditions = ['Wolkig', 'Bedeckt', 'Regnerisch', 'Neblig'];
      }
      
      // Helper function
      function getRandomInRange(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
      
      // Update current weather
      const currentTemp = getRandomInRange(tempMaxRange[0], tempMaxRange[1]);
      const currentCondition = conditions[Math.floor(Math.random() * conditions.length)];
      document.getElementById('ns-weather-current-temp').innerHTML = `${currentTemp}&deg;C`;
      document.getElementById('ns-weather-current-condition').innerHTML = nsGetConditionText(currentCondition);
      
      // Update current icon
      const iconType = nsGetIconType(currentCondition);
      document.getElementById('ns-weather-current-icon').innerHTML = nsWeatherIcons[iconType] || nsWeatherIcons['wolkig'];
      
      // Update forecast
      const forecastContainer = document.getElementById('ns-weather-forecast-container');
      forecastContainer.innerHTML = '';
      
      for (let i = 0; i < 3; i++) {
        const forecastDate = new Date();
        forecastDate.setDate(now.getDate() + i + 1);
        
        const tempMin = getRandomInRange(tempMinRange[0], tempMinRange[1]);
        const tempMax = getRandomInRange(tempMaxRange[0], tempMaxRange[1]);
        const condition = conditions[Math.floor(Math.random() * conditions.length)];
        const precipProb = nsGetPrecipProbability(condition);
        
        const weekday = ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'][forecastDate.getDay()];
        const formattedDate = forecastDate.toLocaleDateString('de-DE');
        
        const dayElement = document.createElement('div');
        dayElement.style.cssText = 'background-color: rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 12px; text-align: center;';
        
        const iconType = nsGetIconType(condition);
        
        dayElement.innerHTML = `
          <div style="font-weight: bold;">${weekday}, ${formattedDate}</div>
          <div style="margin: 8px 0;">${nsWeatherIcons[iconType] || nsWeatherIcons['wolkig']}</div>
          <div style="font-weight: bold;">${tempMin}&deg; - ${tempMax}&deg;C</div>
          <div style="font-size: 14px;">${condition}</div>
          <div style="font-size: 12px; margin-top: 4px;">${rainDropIcon} ${precipProb}%</div>
        `;
        
        forecastContainer.appendChild(dayElement);
      }
      
      // Update last updated time
      document.getElementById('ns-weather-last-updated').innerHTML = `Aktualisiert: ${now.toLocaleDateString('de-DE')} ${now.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' })}`;
    }
    
    // Helper functions
    function nsGetIconType(condition) {
      const c = condition.toLowerCase();
      if (c.includes('sonnig')) return 'sonnig';
      if (c.includes('heiter')) return 'heiter';
      if (c.includes('wolkig')) return 'wolkig';
      if (c.includes('bedeckt')) return 'bedeckt';
      if (c.includes('neblig')) return 'neblig';
      if (c.includes('regen') || c.includes('regnerisch')) return 'regnerisch';
      if (c.includes('gewitter')) return 'gewittrig';
      return 'wolkig';
    }
    
    function nsGetPrecipProbability(condition) {
      const c = condition.toLowerCase();
      if (c.includes('sonnig')) return Math.floor(Math.random() * 10);
      if (c.includes('heiter')) return Math.floor(Math.random() * 20) + 5;
      if (c.includes('wolkig')) return Math.floor(Math.random() * 30) + 15;
      if (c.includes('bedeckt')) return Math.floor(Math.random() * 20) + 30;
      if (c.includes('neblig')) return Math.floor(Math.random() * 30) + 20;
      if (c.includes('regen')) return Math.floor(Math.random() * 30) + 60;
      if (c.includes('gewitter')) return Math.floor(Math.random() * 25) + 70;
      if (c.includes('schnee')) return Math.floor(Math.random() * 30) + 60;
      return Math.floor(Math.random() * 50) + 20;
    }
    
    function nsGetConditionText(condition) {
      const c = condition.toLowerCase();
      if (c.includes('sonnig')) return 'Sonnig und klar';
      if (c.includes('heiter')) return '&Uuml;berwiegend sonnig mit leichter Bew&ouml;lkung';
      if (c.includes('wolkig')) return 'Teilweise bew&ouml;lkt mit sonnigen Abschnitten';
      if (c.includes('bedeckt')) return '&Uuml;berwiegend bew&ouml;lkt';
      if (c.includes('neblig')) return 'Neblig mit eingeschr&auml;nkter Sicht';
      if (c.includes('regen')) return 'Leichter Regen oder Nieselregen';
      if (c.includes('gewitter')) return 'Gewitter mit Regenschauern';
      if (c.includes('schnee')) return 'Schneefall oder Schneeregen';
      return condition;
    }
    
    // Initialize
    nsGenerateWeatherData();
    
    // Update every 30 minutes
    setInterval(function() {
      document.getElementById('ns-weather-last-updated').innerHTML = `Aktualisiert: ${new Date().toLocaleDateString('de-DE')} ${new Date().toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' })}`;
    }, 1800000);
    
    // Refresh data once per day
    setInterval(nsGenerateWeatherData, 86400000);
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9354d7fd42845d4a',t:'MTc0NTQ4OTc3MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
